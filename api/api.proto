syntax = "proto3";

package game.api.api;
option go_package = "game.api.api";

import "api/constants.proto";
import "api/data.proto";

service DownFluxService {
  rpc Move(MoveRequest) returns (MoveResponse) {
    option idempotency_level = IDEMPOTENT;
  };

  rpc StreamCurves(StreamCurvesRequest) returns (stream StreamCurvesResponse) {
    option idempotency_level = IDEMPOTENT;
  }
}

message MoveRequest {
  string client_id = 1;
  string tick_id = 2;
  string entity_id = 3;
  game.api.data.Coordinate destination = 4;
  game.api.constants.MoveType move_type = 5;
}

message MoveResponse {}

message StreamCurvesRequest {
  string client_id = 1;
  string tick_id = 2;
}

message StreamCurvesResponse {
  string tick_id = 1;
  string next_tick_id = 2;
  repeated game.api.data.Curve curves = 3;
}
